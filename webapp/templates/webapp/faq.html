{% extends './base.html' %}

{% load static %}

{% block title %}FAQ{% endblock %}

{% block head %}
    <link rel="stylesheet" href="{% static '/css/faq.css' %}">
{% endblock %}

{% block content %}
    <h2>FAQ</h2>
    <ul>
        {% for faq in faqs %}
            <li>{{ faq.question }}: {{ faq.answer }}</li>
        {% endfor %}
    </ul>
    <h2>Обратная связь</h2>
    <form method="post">
        {% csrf_token %}
        {{ form.text.label_tag }}<br>
        {{ form.text }}<br>
        {{ form.rate.label_tag }}<br>
        <div class="rating">
            {% for choice in form.rate %}
                {{ choice.tag }}
                <label for="{{ choice.id_for_label }}">&#9733;</label>
            {% endfor %}
        </div>
        <button type="submit">Отправить</button>
    </form>

    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            const stars = document.querySelectorAll('.rating input');
            stars.forEach(star => {
                star.addEventListener('change', () => {
                    const checkedStars = document.querySelectorAll('.rating input:checked');
                    checkedStars.forEach(checkedStar => {
                        const labels = checkedStar.closest('.rating').querySelectorAll('label');
                        labels.forEach(label => label.style.color = '#ddd');
                        for (let i = 0; i < checkedStar.value; i++) {
                            labels[i].style.color = '#f5b301';
                        }
                    });
                });
            });
        });
    </script>
{% endblock %}

{% block externals %}
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"></script>

{% endblock %}
